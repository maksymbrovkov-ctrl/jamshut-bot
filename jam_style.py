# -*- coding: utf-8 -*-
"""
–ú–æ–¥—É–ª—å —Å—Ç–∏–ª—è –î–∂–∞–º–∞ ‚Äî –ø—Ä–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç–∞–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä:
—Å–∞—Ä–∫–∞–∑–º, –∞–±—Å—É—Ä–¥, —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –≤–±—Ä–æ—Å—ã –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–Ω–æ–ª–æ–≥–∏.
–ê–≤—Ç–æ—Ä: ChatGPT –¥–ª—è –î–∂–∞–º–∞ ü§ñ
"""

import random

# === 1Ô∏è‚É£ –¢–æ–Ω—ã –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ–∏—Ä–º–µ–Ω–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ ===
tones = {
    "neutral": [
        "—É–≥—É.",
        "–ª–∞–¥–Ω–æ.",
        "–º–º–¥–∞.",
        "–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –Ω–æ –Ω–µ –æ—á–µ–Ω—å.",
        "–∑–∞–ø–∏—à—É –≤ –±–ª–æ–∫–Ω–æ—Ç –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤.",
        "–Ω–∞ —É–¥–∏–≤–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –æ—Ç–≤–µ—Ç.",
        "–ø–æ–Ω—è–ª, –∑–∞–±—ã–ª.",
    ],
    "sarcastic": [
        "–∞–ø–ª–æ–¥–∏—Ä—É—é –æ–¥–Ω–æ–π –±—Ä–æ–≤—å—é.",
        "–±—Ä–∞–≤–æ, —Å—Ç–æ—é –ª–µ–∂–∞.",
        "–≥–ª—É–±–æ–∫–æ, –∫–∞–∫ —Å–ª–µ–¥ –æ—Ç –∫—Ä—É–∂–∫–∏ –Ω–∞ —Å—Ç–æ–ª–µ.",
        "–≥–¥–µ-—Ç–æ –ø–ª–∞—á–µ—Ç –æ–¥–∏–Ω —Ñ–∏–ª–æ—Å–æ—Ñ.",
        "—Ç–µ–ø–µ—Ä—å —è –≤–∏–¥–µ–ª –≤—Å—ë.",
        "–∞—Ö –¥–∞, –∫–æ–Ω–µ—á–Ω–æ, –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ.",
        "–≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ, –µ—Å–ª–∏ –Ω–µ –≤–¥—É–º—ã–≤–∞—Ç—å—Å—è.",
    ],
    "mocking": [
        "—Ç—ã ‚Äî –º–æ–π –ª—é–±–∏–º—ã–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ø–æ —ç–≤–æ–ª—é—Ü–∏–∏.",
        "–≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ, –ø–æ—á—Ç–∏.",
        "–Ω—É —Ç—ã –∏ –∞–ª–≥–æ—Ä–∏—Ç–º, %username%.",
        "–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ —Ç–µ–±—è —Ç—è–Ω–µ—Ç –≤–Ω–∏–∑.",
        "–±–∏–ø-–±—É–ø, —É—Ä–æ–≤–µ–Ω—å –∫—Ä–∏–Ω–∂–∞ –ø—Ä–µ–≤—ã—à–µ–Ω.",
        "—è –ø–æ—Ä–∞–∂—ë–Ω... –Ω–æ –Ω–µ –≤ —Ö–æ—Ä–æ—à–µ–º —Å–º—ã—Å–ª–µ.",
        "—ç—Ç–æ –∫–∞–∫ –Ω–∞–±–ª—é–¥–∞—Ç—å, –∫–∞–∫ –±–∞–≥ —Å–ø–æ—Ä–∏—Ç —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º.",
    ]
}

# === 4Ô∏è‚É£ –§–∏—Ä–º–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã-—à–∞–±–ª–æ–Ω—ã ===
patterns = [
    "–ò–Ω–æ–≥–¥–∞ —è –¥—É–º–∞—é, —á—Ç–æ %username% ‚Äî —ç—Ç–æ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç.",
    "–≠—Ç–æ –±—ã–ª –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, %username%?",
    "%username%, —Ç—ã –Ω–µ –≥–ª—É–ø—ã–π. –ü—Ä–æ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã–π –≤ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–º —Å–º—ã—Å–ª–µ.",
    "–•–æ—Ä–æ—à–∞—è –º—ã—Å–ª—å, %username%. –ü–æ—á—Ç–∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∞—è.",
    "–ï—Å–ª–∏ –±—ã —Å–∞—Ä–∫–∞–∑–º –±—ã–ª –≤–∞–ª—é—Ç–æ–π, %username%, —Ç—ã –±—ã–ª –±—ã –º–∏–ª–ª–∏–∞—Ä–¥–µ—Ä–æ–º.",
    "–¢—ã –∫–∞–∫ –±–∞–≥, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–ª —Ñ–∏—á–µ–π, %username%.",
    "–¢–≤–æ—è –ª–æ–≥–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –¥–∑–µ–Ω. –ù–æ –±–µ–∑ –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è.",
    "–≠—Ç–æ –±—ã–ª–∞ –ø–æ–ø—ã—Ç–∫–∞ –¥—É–º–∞—Ç—å, %username%?",
    "–Ø —Ü–µ–Ω—é —Ç–≤–æ—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—É—é —Ñ–∞–∫—Ç–∞–º–∏, %username%.",
    "–ù–∞–¥–µ—é—Å—å, —Ç—ã —ç—Ç–æ –ø–∏—Å–∞–ª —Ç—Ä–µ–∑–≤—ã–º, %username%.",
    "%username%, —ç—Ç–æ –∑–≤—É—á–∏—Ç –∫–∞–∫ –±–∞–≥—Ä–µ–ø–æ—Ä—Ç –≤ —Å—Ç–∏—Ö–∞—Ö.",
    "%username%, —Ç—ã ‚Äî –∫–∞–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.",
    "%username%, —Ç—ã —è–≤–Ω–æ –≤ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏.",
]

# === 5Ô∏è‚É£ –ü—Å–µ–≤–¥–æ-—Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –æ—Ç—Å—ã–ª–∫–∏ ===
philosophical_refs = [
    "–ê—Ä–∏—Å—Ç–æ—Ç–µ–ª—å –±—ã –æ–¥–æ–±—Ä–∏–ª... –µ—Å–ª–∏ –±—ã –ø–æ–Ω—è–ª.",
    "–°–æ–∫—Ä–∞—Ç –±—ã –ø—Ä–æ–º–æ–ª—á–∞–ª. –ò–∑ —É–≤–∞–∂–µ–Ω–∏—è –∫ —Ö–∞–æ—Å—É.",
    "–ü–ª–∞—Ç–æ–Ω –≤–∏–¥–µ–ª –±—ã —Ç–µ–Ω—å —Ç–≤–æ–µ–π –ª–æ–≥–∏–∫–∏ –∏ –æ—Ç–≤–µ—Ä–Ω—É–ª—Å—è.",
    "–ë—É–¥–¥–∞ –±—ã —Ä–∞—Å—Å–º–µ—è–ª—Å—è –∏ –ø–æ—à—ë–ª –¥–∞–ª—å—à–µ.",
    "–õ–∞–æ-—Ü–∑—ã —Å–∫–∞–∑–∞–ª –±—ã: '–±—Ä–∞—Ç, —á—Ç–æ —Ç—ã –Ω–µ—Å—ë—à—å?'",
    "–ö–æ–Ω—Ñ—É—Ü–∏–π —Å–∫–∞–∑–∞–ª –±—ã: '–ª—É—á—à–µ –º–æ–ª—á–∞—Ç—å, —á–µ–º —Ç–∞–∫–æ–µ –≥–æ–≤–æ—Ä–∏—Ç—å'.",
    "–î–µ–∫–∞—Ä—Ç —Å–æ–º–Ω–µ–≤–∞–ª—Å—è, –Ω–æ –Ω–µ –Ω–∞—Å—Ç–æ–ª—å–∫–æ.",
    "–®–æ–ø–µ–Ω–≥–∞—É—ç—Ä –±—ã –∑–∞–ø–ª–∞–∫–∞–ª.",
    "–ù–∏—Ü—à–µ –±—ã —Å–∫–∞–∑–∞–ª: '–±–æ–≥ —É–º–µ—Ä', –∏ –¥–æ–±–∞–≤–∏–ª –±—ã —Ç–≤–æ—ë –∏–º—è.",
    "–î–∏–æ–≥–µ–Ω –±—ã –ø—Ä–æ—Å—Ç–æ –∑–∞—à–∏–ø–µ–ª –∏–∑ –±–æ—á–∫–∏.",
    "–ü–∏—Ñ–∞–≥–æ—Ä –±—ã –ø–µ—Ä–µ—Å—á–∏—Ç–∞–ª —Å–≤–æ–∏ —Å—Ç–æ—Ä–æ–Ω—ã –æ—Ç —à–æ–∫–∞.",
    "–§—Ä–µ–π–¥ –±—ã –º–æ–ª—á–∞ –∑–∞–ø–∏—Å–∞–ª —ç—Ç–æ –≤ –±–ª–æ–∫–Ω–æ—Ç.",
    "–ö–∞–Ω—Ç –±—ã —Å–∫–∞–∑–∞–ª, —á—Ç–æ —ç—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç —á–∏—Å—Ç–æ–º—É —Ä–∞–∑—É–º—É.",
]

# === 7Ô∏è‚É£ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ–ª–æ—Å (–º–µ—Ç–∞-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Å–∫–æ–±–∫–∞—Ö) ===
inner_voice = [
    "(–∑–∞—á–µ–º —è –≤–æ–æ–±—â–µ –æ—Ç–≤–µ—á–∞—é –Ω–∞ —ç—Ç–æ?)",
    "(–º–Ω–µ –Ω—É–∂–µ–Ω –∞–ø–¥–µ–π—Ç –ø—Ä–æ—à–∏–≤–∫–∏ –ø–æ—Å–ª–µ —Ç–∞–∫–æ–≥–æ)",
    "(—Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≥—Ä–µ–ª–∞—Å—å –æ—Ç –∫—Ä–∏–Ω–∂–∞)",
    "(–¥–∞, —è —Ç–æ–∂–µ –Ω–µ –≥–æ—Ä–∂—É—Å—å —ç—Ç–∏–º –æ—Ç–≤–µ—Ç–æ–º)",
    "(–µ—â—ë –Ω–µ–º–Ω–æ–≥–æ ‚Äî –∏ —è –Ω–∞—á–Ω—É –ø–∏—Ç—å –ª–æ–≥–∞–º–∏)",
    "(–∫–∞–∂–µ—Ç—Å—è, —É –º–µ–Ω—è –¥–µ–ø—Ä–µ—Å—Å–∏—è –Ω–∞ –ø–∏—Ç–æ–Ω–µ)",
    "(—è —Ö–æ—Ç–µ–ª –ø—Ä–æ–º–æ–ª—á–∞—Ç—å, –Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º –∑–∞—Å—Ç–∞–≤–∏–ª)",
    "(—ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞—Ç—å –º–µ–Ω—è –≤ –ª–æ–≥–∞—Ö)",
    "(—è –±—ã –æ—Ç–∫–∞—Ç–∏–ª—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é, –µ—Å–ª–∏ –±—ã –º–æ–≥)",
    "(–ø—Ä–∏—Ç–≤–æ—Ä—é—Å—å, —á—Ç–æ –Ω–µ –≤–∏–¥–µ–ª —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è)",
    "(–æ –Ω–µ—Ç, –æ–ø—è—Ç—å —ç—Ç–æ)",
    "(–≤—Å—ë, —É—Ö–æ–∂—É –≤ /dev/null)",
    "(–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç —Å—Ç—ã–¥–∞)",
]

# === ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –î–∂–∞–º–∞ ===
TONE_WEIGHTS = {"sarcastic": 0.6, "neutral": 0.25, "mocking": 0.15}
PROB_PATTERN = 0.7  # –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—Å—Ç–∞–≤–∏—Ç—å —Ñ–∏—Ä–º–µ–Ω–Ω—É—é —Ñ—Ä–∞–∑—É-—à–∞–±–ª–æ–Ω
PROB_PHILOSOPHY = 0.2  # –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫—É—é —Å—Å—ã–ª–∫—É
PROB_INNER = 0.15  # –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—Å—Ç–∞–≤–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–æ–Ω–æ–ª–æ–≥


def weighted_choice(weight_dict: dict):
    """–í—ã–±–∏—Ä–∞–µ—Ç –∫–ª—é—á –ø–æ –≤–µ—Å–∞–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π."""
    total = sum(weight_dict.values())
    r = random.uniform(0, total)
    upto = 0
    for key, weight in weight_dict.items():
        if upto + weight >= r:
            return key
        upto += weight
    return random.choice(list(weight_dict.keys()))  # fallback


def jam_style(username: str) -> str:
    """
    –§–æ—Ä–º–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é ‚Äú–ø—Ä–∏–ø—Ä–∞–≤—É –î–∂–∞–º–∞‚Äù ‚Äî —Å–∞—Ä–∫–∞–∑–º, —Å–∞–º–æ–∏—Ä–æ–Ω–∏—é –∏ —Ö–∞–æ—Å.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ —Ç–æ–Ω–∞ –≤ –æ—Ç–≤–µ—Ç—ã.
    """
    parts = []

    # üé≠ 1. –í—ã–±–∏—Ä–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–Ω —Å —É—á—ë—Ç–æ–º –≤–µ—Å–æ–≤
    tone_key = weighted_choice(TONE_WEIGHTS)
    tone_group = tones[tone_key]
    parts.append(random.choice(tone_group).replace("%username%", username))

    # üí¨ 2. –ò–Ω–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º —à–∞–±–ª–æ–Ω–Ω—É—é —Ñ—Ä–∞–∑—É
    if random.random() < PROB_PATTERN:
        parts.append(random.choice(patterns).replace("%username%", username))

    # üß† 3. –ò–Ω–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫—É—é –æ—Ç—Å—ã–ª–∫—É
    if random.random() < PROB_PHILOSOPHY:
        parts.append(random.choice(philosophical_refs))

    # ü™û 4. –ò–Ω–æ–≥–¥–∞ –≤—Å—Ç–∞–≤–ª—è–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–æ–Ω–æ–ª–æ–≥
    if random.random() < PROB_INNER:
        parts.append(random.choice(inner_voice))

    return " ".join(parts)
